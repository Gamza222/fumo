9fe4b8389278228490d98b475dbc3121
"use strict";
/**
 * Axios REST Client Tests
 *
 * Real-life enterprise scenarios testing with minimal mocking.
 * Uses existing mock factory patterns and real HTTP behavior where possible.
 */
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", { value: true });
var axiosClient_1 = require("./axiosClient");
// Use existing mock factory patterns
var browser_1 = require("@/shared/testing/mocks/browser");
describe('Axios REST Client', function () {
    var mockLocalStorage;
    beforeEach(function () {
        // Use existing mock factory patterns
        browser_1.mockConsole.clear();
        // Create fresh localStorage mock for each test
        mockLocalStorage = (0, browser_1.mockStorage)();
        Object.defineProperty(window, 'localStorage', {
            value: mockLocalStorage,
            writable: true,
        });
    });
    afterEach(function () {
        // Cleanup
        browser_1.mockConsole.restore();
        // Clear any pending timers from retry logic
        jest.clearAllTimers();
        // Clear mock storage
        mockLocalStorage.clear();
    });
    // ============================================================================
    // REAL-LIFE ENTERPRISE SCENARIOS
    // ============================================================================
    describe('Enterprise REST Operations', function () {
        it('should have proper HTTP methods configured', function () {
            // Real scenario: all REST operations should be available
            expect(typeof axiosClient_1.get).toBe('function');
            expect(typeof axiosClient_1.post).toBe('function');
            expect(typeof axiosClient_1.put).toBe('function');
            expect(typeof axiosClient_1.patch).toBe('function');
            expect(typeof axiosClient_1.del).toBe('function');
        });
        it('should configure proper request defaults for enterprise use', function () {
            // Real scenario: enterprise-appropriate configuration
            expect(axiosClient_1.axiosClient.defaults.timeout).toBeGreaterThan(0);
            expect(axiosClient_1.axiosClient.defaults.baseURL).toBeDefined();
            expect(axiosClient_1.axiosClient.defaults.headers['Accept']).toBe('application/json');
            expect(axiosClient_1.axiosClient.defaults.headers['Content-Type']).toBe('application/json');
        });
        it('should handle request data serialization properly', function () {
            // Real scenario: complex objects should be serialized correctly
            var userData = {
                name: 'John Doe',
                email: 'john@company.com',
                metadata: { department: 'Engineering', level: 'Senior' },
                permissions: ['read', 'write'],
            };
            // Should not throw when preparing request data
            expect(function () {
                JSON.stringify(userData);
            }).not.toThrow();
        });
        it('should support proper HTTP status validation', function () {
            // Real scenario: only 2xx should be success
            var validateStatus = axiosClient_1.axiosClient.defaults.validateStatus;
            expect(validateStatus).toBeDefined();
            if (validateStatus) {
                expect(validateStatus(200)).toBe(true);
                expect(validateStatus(201)).toBe(true);
                expect(validateStatus(204)).toBe(true);
                expect(validateStatus(400)).toBe(false);
                expect(validateStatus(401)).toBe(false);
                expect(validateStatus(500)).toBe(false);
            }
        });
    });
    // ============================================================================
    // AUTHENTICATION - REAL ENTERPRISE SCENARIOS
    // ============================================================================
    describe('Authentication Integration', function () {
        it('should add auth headers when token is available', function () {
            // Real scenario: authenticated user making requests
            mockLocalStorage.setItem('auth_token', 'enterprise_auth_token_123');
            // Test that request includes auth header
            var originalRequest = axiosClient_1.axiosClient.interceptors.request;
            expect(originalRequest).toBeDefined();
            expect(mockLocalStorage.getItem('auth_token')).toBe('enterprise_auth_token_123');
        });
        it('should work without auth token for public endpoints', function () {
            // Real scenario: public API endpoints should not require auth
            expect(mockLocalStorage.getItem('auth_token')).toBeNull();
            // Should have interceptors configured properly
            expect(axiosClient_1.axiosClient.interceptors.request).toBeDefined();
            expect(axiosClient_1.axiosClient.interceptors.response).toBeDefined();
        });
        it('should handle multiple token storage strategies', function () {
            // Real scenario: different enterprise apps store tokens differently
            var tokenStrategies = [
                { key: 'auth_token', value: 'bearer_token_123' },
                { key: 'access_token', value: 'jwt_token_456' },
                { key: 'session_token', value: 'session_789' },
            ];
            tokenStrategies.forEach(function (_a) {
                var key = _a.key, value = _a.value;
                mockLocalStorage.clear();
                mockLocalStorage.setItem(key, value);
                // Should handle each strategy without errors
                expect(mockLocalStorage.getItem(key)).toBe(value);
                expect(function () { return axiosClient_1.axiosClient.defaults; }).not.toThrow();
            });
        });
        it('should have error interceptor configured for auth handling', function () {
            // Real scenario: 401 responses should clear auth tokens
            expect(axiosClient_1.axiosClient.interceptors.response).toBeDefined();
            // Should have response interceptor for error handling
            var responseInterceptors = axiosClient_1.axiosClient.interceptors.response.handlers;
            expect(responseInterceptors.length).toBeGreaterThan(0);
        });
    });
    // ============================================================================
    // ERROR HANDLING - REAL ENTERPRISE SCENARIOS
    // ============================================================================
    describe('Error Handling', function () {
        it('should have error interceptor configured for standardized errors', function () {
            // Real scenario: all errors should follow same format
            expect(axiosClient_1.axiosClient.interceptors.response).toBeDefined();
            // Should have response interceptor for error handling
            var responseInterceptors = axiosClient_1.axiosClient.interceptors.response.handlers;
            expect(responseInterceptors.length).toBeGreaterThan(0);
        });
        it('should handle different HTTP error status codes appropriately', function () {
            // Real scenario: different error types need different handling
            var errorScenarios = [
                { status: 400, description: 'Bad Request - validation errors' },
                { status: 401, description: 'Unauthorized - auth required' },
                { status: 403, description: 'Forbidden - insufficient permissions' },
                { status: 404, description: 'Not Found - resource missing' },
                { status: 429, description: 'Rate Limited - too many requests' },
                { status: 500, description: 'Server Error - internal issues' },
            ];
            // Each error type should be recognized by status validation
            errorScenarios.forEach(function (_a) {
                var status = _a.status;
                var validateStatus = axiosClient_1.axiosClient.defaults.validateStatus;
                if (validateStatus) {
                    expect(validateStatus(status)).toBe(false);
                }
            });
        });
        it('should have proper error logging configured', function () {
            // Real scenario: developers need error visibility
            expect(axiosClient_1.axiosClient.interceptors.response).toBeDefined();
            // Console should be available for error logging
            expect(global.console.error).toBeDefined();
        });
        it('should generate unique request IDs for error tracking', function () {
            // Real scenario: errors need unique identifiers for tracing
            expect(axiosClient_1.axiosClient.interceptors.request).toBeDefined();
            // Request interceptor should add unique identifiers
            var requestInterceptors = axiosClient_1.axiosClient.interceptors.request.handlers;
            expect(requestInterceptors.length).toBeGreaterThan(0);
        });
    });
    // ============================================================================
    // RETRY LOGIC - REAL ENTERPRISE SCENARIOS
    // ============================================================================
    describe('Retry Logic', function () {
        it('should have retry configuration available', function () {
            // Real scenario: client should support retry configuration
            expect(axiosClient_1.axiosClient.interceptors.response).toBeDefined();
            // Should have error handling that supports retries
            var responseInterceptors = axiosClient_1.axiosClient.interceptors.response.handlers;
            expect(responseInterceptors.length).toBeGreaterThan(0);
        });
        it('should handle retry configuration options', function () {
            // Real scenario: different requests need different retry strategies
            var retryConfigs = [
                { skipRetry: true, retryAttempts: 0 },
                { skipRetry: false, retryAttempts: 3 },
                { retryAttempts: 5 },
            ];
            retryConfigs.forEach(function (config) {
                // Should accept retry configuration without error
                expect(function () {
                    var requestConfig = __assign(__assign({}, config), { url: '/test' });
                    expect(requestConfig).toBeDefined();
                }).not.toThrow();
            });
        });
        it('should have exponential backoff constants defined', function () {
            // Real scenario: retry delays should increase exponentially
            // Check that retry logic exists in the client
            expect(axiosClient_1.axiosClient.interceptors.response).toBeDefined();
        });
        it('should differentiate between retryable and non-retryable errors', function () {
            // Real scenario: 4xx errors should not retry, 5xx should retry
            var nonRetryableStatuses = [400, 401, 403, 404, 422];
            var retryableStatuses = [500, 502, 503, 504];
            nonRetryableStatuses.forEach(function (status) {
                // Client errors should not be retried
                expect(status).toBeGreaterThanOrEqual(400);
                expect(status).toBeLessThan(500);
            });
            retryableStatuses.forEach(function (status) {
                // Server errors can be retried
                expect(status).toBeGreaterThanOrEqual(500);
            });
        });
    });
    // ============================================================================
    // PERFORMANCE MONITORING - REAL ENTERPRISE SCENARIOS
    // ============================================================================
    describe('Performance Monitoring', function () {
        it('should have request timing infrastructure', function () {
            // Real scenario: performance tracking should be built-in
            expect(axiosClient_1.axiosClient.interceptors.request).toBeDefined();
            expect(axiosClient_1.axiosClient.interceptors.response).toBeDefined();
            // Should have timing capability
            expect(Date.now).toBeDefined();
        });
        it('should generate request IDs for tracing', function () {
            // Real scenario: each request needs unique identifier
            expect(axiosClient_1.axiosClient.interceptors.request).toBeDefined();
            // Should have request interceptor for adding IDs
            var requestInterceptors = axiosClient_1.axiosClient.interceptors.request.handlers;
            expect(requestInterceptors.length).toBeGreaterThan(0);
        });
        it('should support performance monitoring hooks', function () {
            // Real scenario: enterprises integrate with their monitoring
            var mockPerformanceTracker = jest.fn();
            window.__REST_PERFORMANCE_TRACKER__ = mockPerformanceTracker;
            // Should be able to attach custom monitoring
            expect(window.__REST_PERFORMANCE_TRACKER__).toBeDefined();
            delete window.__REST_PERFORMANCE_TRACKER__;
        });
        it('should have proper headers for monitoring', function () {
            // Real scenario: monitoring requires client identification
            expect(axiosClient_1.axiosClient.defaults.headers).toBeDefined();
            // Should identify the client for monitoring
            var headers = axiosClient_1.axiosClient.defaults.headers;
            expect(headers).toHaveProperty('Accept');
            expect(headers).toHaveProperty('Content-Type');
        });
    });
    // ============================================================================
    // DATA TRANSFORMATION - REAL ENTERPRISE SCENARIOS
    // ============================================================================
    describe('Data Transformation', function () {
        it('should handle complex data serialization', function () {
            // Real scenario: objects should be properly serialized
            var complexData = {
                user: { id: 123, name: 'Test User' },
                metadata: { timestamp: Date.now(), version: '1.0' },
                permissions: ['read', 'write'],
                nestedArray: [{ id: 1, data: 'test' }],
            };
            // Should serialize complex objects without error
            expect(function () {
                JSON.stringify(complexData);
            }).not.toThrow();
            var serialized = JSON.stringify(complexData);
            expect(typeof serialized).toBe('string');
            expect(serialized.length).toBeGreaterThan(0);
        });
        it('should handle response transformation setup', function () {
            // Real scenario: responses should be automatically parsed
            expect(axiosClient_1.axiosClient.interceptors.response).toBeDefined();
            // Should have response transformation capability
            var responseInterceptors = axiosClient_1.axiosClient.interceptors.response.handlers;
            expect(responseInterceptors.length).toBeGreaterThan(0);
        });
        it('should set appropriate content-type headers', function () {
            // Real scenario: servers need proper content-type
            var defaults = axiosClient_1.axiosClient.defaults;
            expect(defaults.headers['Content-Type']).toBe('application/json');
            expect(defaults.headers['Accept']).toBe('application/json');
        });
        it('should handle different data types appropriately', function () {
            // Real scenario: various data types should be supported
            var dataTypes = [
                { type: 'object', data: { key: 'value' } },
                { type: 'array', data: [1, 2, 3] },
                { type: 'string', data: 'simple string' },
                { type: 'number', data: 42 },
                { type: 'boolean', data: true },
            ];
            dataTypes.forEach(function (_a) {
                var data = _a.data;
                expect(function () {
                    JSON.stringify(data);
                }).not.toThrow();
            });
        });
    });
    // ============================================================================
    // CONFIGURATION - REAL ENTERPRISE SCENARIOS
    // ============================================================================
    describe('Configuration', function () {
        it('should use enterprise-appropriate timeouts', function () {
            // Real scenario: enterprise networks need reasonable timeouts
            expect(axiosClient_1.axiosClient.defaults.timeout).toBeGreaterThan(0);
            expect(axiosClient_1.axiosClient.defaults.timeout).toBeLessThanOrEqual(30000);
        });
        it('should support base URL configuration', function () {
            // Real scenario: different environments have different base URLs
            expect(axiosClient_1.axiosClient.defaults.baseURL).toBeDefined();
        });
        it('should handle redirects appropriately', function () {
            // Real scenario: enterprise proxies may redirect
            expect(axiosClient_1.axiosClient.defaults.maxRedirects).toBeGreaterThan(0);
        });
        it('should validate status codes correctly', function () {
            // Real scenario: only 2xx should be considered success
            var validateStatus = axiosClient_1.axiosClient.defaults.validateStatus;
            expect(validateStatus).toBeDefined();
            if (validateStatus) {
                expect(validateStatus(200)).toBe(true);
                expect(validateStatus(201)).toBe(true);
                expect(validateStatus(400)).toBe(false);
                expect(validateStatus(500)).toBe(false);
            }
        });
    });
});
describe('Axios Client Integration', function () {
    it('should be ready for real enterprise REST APIs', function () {
        // Real scenario: production readiness check
        expect(axiosClient_1.axiosClient.defaults).toBeDefined();
        expect(axiosClient_1.axiosClient.interceptors).toBeDefined();
        expect(typeof axiosClient_1.get).toBe('function');
        expect(typeof axiosClient_1.post).toBe('function');
        expect(typeof axiosClient_1.put).toBe('function');
        expect(typeof axiosClient_1.patch).toBe('function');
        expect(typeof axiosClient_1.del).toBe('function');
    });
    it('should work with standard REST API conventions', function () {
        // Real scenario: follows REST best practices
        var restOperations = [
            { method: axiosClient_1.get, url: '/users', description: 'List resources' },
            {
                method: function (url) { return (0, axiosClient_1.get)("".concat(url, "/123")); },
                url: '/users',
                description: 'Get specific resource',
            },
            { method: function (url) { return (0, axiosClient_1.post)(url, {}); }, url: '/users', description: 'Create resource' },
            {
                method: function (url) { return (0, axiosClient_1.put)("".concat(url, "/123"), {}); },
                url: '/users',
                description: 'Update resource',
            },
            {
                method: function (url) { return (0, axiosClient_1.patch)("".concat(url, "/123"), {}); },
                url: '/users',
                description: 'Partial update',
            },
            { method: function (url) { return (0, axiosClient_1.del)("".concat(url, "/123")); }, url: '/users', description: 'Delete resource' },
        ];
        restOperations.forEach(function (_a) {
            var method = _a.method, url = _a.url;
            expect(function () {
                method(url).catch(function () {
                    // Expected network error in test environment
                });
            }).not.toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dhbXphcmFtYXphbm92L0Rlc2t0b3AvZnVtby9zcmMvaW5mcmFzdHJ1Y3R1cmUvZGF0YS9heGlvcy9heGlvc0NsaWVudC50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7Ozs7Ozs7Ozs7OztBQUVILDZDQUF3RTtBQUV4RSxxQ0FBcUM7QUFDckMsMERBQTBFO0FBRTFFLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRTtJQUM1QixJQUFJLGdCQUFnRCxDQUFDO0lBRXJELFVBQVUsQ0FBQztRQUNULHFDQUFxQztRQUNyQyxxQkFBVyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBRXBCLCtDQUErQztRQUMvQyxnQkFBZ0IsR0FBRyxJQUFBLHFCQUFXLEdBQUUsQ0FBQztRQUNqQyxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxjQUFjLEVBQUU7WUFDNUMsS0FBSyxFQUFFLGdCQUFnQjtZQUN2QixRQUFRLEVBQUUsSUFBSTtTQUNmLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDO1FBQ1IsVUFBVTtRQUNWLHFCQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDdEIsNENBQTRDO1FBQzVDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN0QixxQkFBcUI7UUFDckIsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDM0IsQ0FBQyxDQUFDLENBQUM7SUFFSCwrRUFBK0U7SUFDL0UsaUNBQWlDO0lBQ2pDLCtFQUErRTtJQUUvRSxRQUFRLENBQUMsNEJBQTRCLEVBQUU7UUFDckMsRUFBRSxDQUFDLDRDQUE0QyxFQUFFO1lBQy9DLHlEQUF5RDtZQUN6RCxNQUFNLENBQUMsT0FBTyxpQkFBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sQ0FBQyxPQUFPLGtCQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLE9BQU8saUJBQUcsQ0FBQyxDQUFDLElBQUks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QUFNLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDO29CQUNoQiw2Q0FBNkM7Z0JBQy9DLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ25CLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZ2FtemFyYW1hemFub3YvRGVza3RvcC9mdW1vL3NyYy9pbmZyYXN0cnVjdHVyZS9kYXRhL2F4aW9zL2F4aW9zQ2xpZW50LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBeGlvcyBSRVNUIENsaWVudCBUZXN0c1xuICpcbiAqIFJlYWwtbGlmZSBlbnRlcnByaXNlIHNjZW5hcmlvcyB0ZXN0aW5nIHdpdGggbWluaW1hbCBtb2NraW5nLlxuICogVXNlcyBleGlzdGluZyBtb2NrIGZhY3RvcnkgcGF0dGVybnMgYW5kIHJlYWwgSFRUUCBiZWhhdmlvciB3aGVyZSBwb3NzaWJsZS5cbiAqL1xuXG5pbXBvcnQgeyBheGlvc0NsaWVudCwgZGVsLCBnZXQsIHBhdGNoLCBwb3N0LCBwdXQgfSBmcm9tICcuL2F4aW9zQ2xpZW50JztcblxuLy8gVXNlIGV4aXN0aW5nIG1vY2sgZmFjdG9yeSBwYXR0ZXJuc1xuaW1wb3J0IHsgbW9ja0NvbnNvbGUsIG1vY2tTdG9yYWdlIH0gZnJvbSAnQC9zaGFyZWQvdGVzdGluZy9tb2Nrcy9icm93c2VyJztcblxuZGVzY3JpYmUoJ0F4aW9zIFJFU1QgQ2xpZW50JywgKCkgPT4ge1xuICBsZXQgbW9ja0xvY2FsU3RvcmFnZTogUmV0dXJuVHlwZTx0eXBlb2YgbW9ja1N0b3JhZ2U+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIC8vIFVzZSBleGlzdGluZyBtb2NrIGZhY3RvcnkgcGF0dGVybnNcbiAgICBtb2NrQ29uc29sZS5jbGVhcigpO1xuXG4gICAgLy8gQ3JlYXRlIGZyZXNoIGxvY2FsU3RvcmFnZSBtb2NrIGZvciBlYWNoIHRlc3RcbiAgICBtb2NrTG9jYWxTdG9yYWdlID0gbW9ja1N0b3JhZ2UoKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnbG9jYWxTdG9yYWdlJywge1xuICAgICAgdmFsdWU6IG1vY2tMb2NhbFN0b3JhZ2UsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAvLyBDbGVhbnVwXG4gICAgbW9ja0NvbnNvbGUucmVzdG9yZSgpO1xuICAgIC8vIENsZWFyIGFueSBwZW5kaW5nIHRpbWVycyBmcm9tIHJldHJ5IGxvZ2ljXG4gICAgamVzdC5jbGVhckFsbFRpbWVycygpO1xuICAgIC8vIENsZWFyIG1vY2sgc3RvcmFnZVxuICAgIG1vY2tMb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBSRUFMLUxJRkUgRU5URVJQUklTRSBTQ0VOQVJJT1NcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGRlc2NyaWJlKCdFbnRlcnByaXNlIFJFU1QgT3BlcmF0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIEhUVFAgbWV0aG9kcyBjb25maWd1cmVkJywgKCkgPT4ge1xuICAgICAgLy8gUmVhbCBzY2VuYXJpbzogYWxsIFJFU1Qgb3BlcmF0aW9ucyBzaG91bGQgYmUgYXZhaWxhYmxlXG4gICAgICBleHBlY3QodHlwZW9mIGdldCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcG9zdCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcHV0KS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBwYXRjaCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgZGVsKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjb25maWd1cmUgcHJvcGVyIHJlcXVlc3QgZGVmYXVsdHMgZm9yIGVudGVycHJpc2UgdXNlJywgKCkgPT4ge1xuICAgICAgLy8gUmVhbCBzY2VuYXJpbzogZW50ZXJwcmlzZS1hcHByb3ByaWF0ZSBjb25maWd1cmF0aW9uXG4gICAgICBleHBlY3QoYXhpb3NDbGllbnQuZGVmYXVsdHMudGltZW91dCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGF4aW9zQ2xpZW50LmRlZmF1bHRzLmJhc2VVUkwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoYXhpb3NDbGllbnQuZGVmYXVsdHMuaGVhZGVyc1snQWNjZXB0J10pLnRvQmUoJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIGV4cGVjdChheGlvc0NsaWVudC5kZWZhdWx0cy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSkudG9CZSgnYXBwbGljYXRpb24vanNvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmVxdWVzdCBkYXRhIHNlcmlhbGl6YXRpb24gcHJvcGVybHknLCAoKSA9PiB7XG4gICAgICAvLyBSZWFsIHNjZW5hcmlvOiBjb21wbGV4IG9iamVjdHMgc2hvdWxkIGJlIHNlcmlhbGl6ZWQgY29ycmVjdGx5XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICAgICAgbmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgZW1haWw6ICdqb2huQGNvbXBhbnkuY29tJyxcbiAgICAgICAgbWV0YWRhdGE6IHsgZGVwYXJ0bWVudDogJ0VuZ2luZWVyaW5nJywgbGV2ZWw6ICdTZW5pb3InIH0sXG4gICAgICAgIHBlcm1pc3Npb25zOiBbJ3JlYWQnLCAnd3JpdGUnXSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3cgd2hlbiBwcmVwYXJpbmcgcmVxdWVzdCBkYXRhXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBKU09OLnN0cmluZ2lmeSh1c2VyRGF0YSk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IHByb3BlciBIVFRQIHN0YXR1cyB2YWxpZGF0aW9uJywgKCkgPT4ge1xuICAgICAgLy8gUmVhbCBzY2VuYXJpbzogb25seSAyeHggc2hvdWxkIGJlIHN1Y2Nlc3NcbiAgICAgIGNvbnN0IHZhbGlkYXRlU3RhdHVzID0gYXhpb3NDbGllbnQuZGVmYXVsdHMudmFsaWRhdGVTdGF0dXM7XG4gICAgICBleHBlY3QodmFsaWRhdGVTdGF0dXMpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgIGlmICh2YWxpZGF0ZVN0YXR1cykge1xuICAgICAgICBleHBlY3QodmFsaWRhdGVTdGF0dXMoMjAwKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkYXRlU3RhdHVzKDIwMSkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdCh2YWxpZGF0ZVN0YXR1cygyMDQpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QodmFsaWRhdGVTdGF0dXMoNDAwKSkudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdCh2YWxpZGF0ZVN0YXR1cyg0MDEpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkYXRlU3RhdHVzKDUwMCkpLnRvQmUoZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEFVVEhFTlRJQ0FUSU9OIC0gUkVBTCBFTlRFUlBSSVNFIFNDRU5BUklPU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZGVzY3JpYmUoJ0F1dGhlbnRpY2F0aW9uIEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWRkIGF1dGggaGVhZGVycyB3aGVuIHRva2VuIGlzIGF2YWlsYWJsZScsICgpID0+IHtcbiAgICAgIC8vIFJlYWwgc2NlbmFyaW86IGF1dGhlbnRpY2F0ZWQgdXNlciBtYWtpbmcgcmVxdWVzdHNcbiAgICAgIG1vY2tMb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXV0aF90b2tlbicsICdlbnRlcnByaXNlX2F1dGhfdG9rZW5fMTIzJyk7XG5cbiAgICAgIC8vIFRlc3QgdGhhdCByZXF1ZXN0IGluY2x1ZGVzIGF1dGggaGVhZGVyXG4gICAgICBjb25zdCBvcmlnaW5hbFJlcXVlc3QgPSBheGlvc0NsaWVudC5pbnRlcmNlcHRvcnMucmVxdWVzdDtcbiAgICAgIGV4cGVjdChvcmlnaW5hbFJlcXVlc3QpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobW9ja0xvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJykpLnRvQmUoJ2VudGVycHJpc2VfYXV0aF90b2tlbl8xMjMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgd29yayB3aXRob3V0IGF1dGggdG9rZW4gZm9yIHB1YmxpYyBlbmRwb2ludHMnLCAoKSA9PiB7XG4gICAgICAvLyBSZWFsIHNjZW5hcmlvOiBwdWJsaWMgQVBJIGVuZHBvaW50cyBzaG91bGQgbm90IHJlcXVpcmUgYXV0aFxuICAgICAgZXhwZWN0KG1vY2tMb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF90b2tlbicpKS50b0JlTnVsbCgpO1xuXG4gICAgICAvLyBTaG91bGQgaGF2ZSBpbnRlcmNlcHRvcnMgY29uZmlndXJlZCBwcm9wZXJseVxuICAgICAgZXhwZWN0KGF4aW9zQ2xpZW50LmludGVyY2VwdG9ycy5yZXF1ZXN0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGF4aW9zQ2xpZW50LmludGVyY2VwdG9ycy5yZXNwb25zZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIHRva2VuIHN0b3JhZ2Ugc3RyYXRlZ2llcycsICgpID0+IHtcbiAgICAgIC8vIFJlYWwgc2NlbmFyaW86IGRpZmZlcmVudCBlbnRlcnByaXNlIGFwcHMgc3RvcmUgdG9rZW5zIGRpZmZlcmVudGx5XG4gICAgICBjb25zdCB0b2tlblN0cmF0ZWdpZXMgPSBbXG4gICAgICAgIHsga2V5OiAnYXV0aF90b2tlbicsIHZhbHVlOiAnYmVhcmVyX3Rva2VuXzEyMycgfSxcbiAgICAgICAgeyBrZXk6ICdhY2Nlc3NfdG9rZW4nLCB2YWx1ZTogJ2p3dF90b2tlbl80NTYnIH0sXG4gICAgICAgIHsga2V5OiAnc2Vzc2lvbl90b2tlbicsIHZhbHVlOiAnc2Vzc2lvbl83ODknIH0sXG4gICAgICBdO1xuXG4gICAgICB0b2tlblN0cmF0ZWdpZXMuZm9yRWFjaCgoeyBrZXksIHZhbHVlIH0pID0+IHtcbiAgICAgICAgbW9ja0xvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgICAgICBtb2NrTG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG5cbiAgICAgICAgLy8gU2hvdWxkIGhhbmRsZSBlYWNoIHN0cmF0ZWd5IHdpdGhvdXQgZXJyb3JzXG4gICAgICAgIGV4cGVjdChtb2NrTG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSkudG9CZSh2YWx1ZSk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBheGlvc0NsaWVudC5kZWZhdWx0cykubm90LnRvVGhyb3coKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGVycm9yIGludGVyY2VwdG9yIGNvbmZpZ3VyZWQgZm9yIGF1dGggaGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgICAvLyBSZWFsIHNjZW5hcmlvOiA0MDEgcmVzcG9uc2VzIHNob3VsZCBjbGVhciBhdXRoIHRva2Vuc1xuICAgICAgZXhwZWN0KGF4aW9zQ2xpZW50LmludGVyY2VwdG9ycy5yZXNwb25zZSkudG9CZURlZmluZWQoKTtcblxuICAgICAgLy8gU2hvdWxkIGhhdmUgcmVzcG9uc2UgaW50ZXJjZXB0b3IgZm9yIGVycm9yIGhhbmRsaW5nXG4gICAgICBjb25zdCByZXNwb25zZUludGVyY2VwdG9ycyA9IChheGlvc0NsaWVudC5pbnRlcmNlcHRvcnMucmVzcG9uc2UgYXMgYW55KS5oYW5kbGVycztcbiAgICAgIGV4cGVjdChyZXNwb25zZUludGVyY2VwdG9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBFUlJPUiBIQU5ETElORyAtIFJFQUwgRU5URVJQUklTRSBTQ0VOQVJJT1NcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgZXJyb3IgaW50ZXJjZXB0b3IgY29uZmlndXJlZCBmb3Igc3RhbmRhcmRpemVkIGVycm9ycycsICgpID0+IHtcbiAgICAgIC8vIFJlYWwgc2NlbmFyaW86IGFsbCBlcnJvcnMgc2hvdWxkIGZvbGxvdyBzYW1lIGZvcm1hdFxuICAgICAgZXhwZWN0KGF4aW9zQ2xpZW50LmludGVyY2VwdG9ycy5yZXNwb25zZSkudG9CZURlZmluZWQoKTtcblxuICAgICAgLy8gU2hvdWxkIGhhdmUgcmVzcG9uc2UgaW50ZXJjZXB0b3IgZm9yIGVycm9yIGhhbmRsaW5nXG4gICAgICBjb25zdCByZXNwb25zZUludGVyY2VwdG9ycyA9IChheGlvc0NsaWVudC5pbnRlcmNlcHRvcnMucmVzcG9uc2UgYXMgYW55KS5oYW5kbGVycztcbiAgICAgIGV4cGVjdChyZXNwb25zZUludGVyY2VwdG9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBIVFRQIGVycm9yIHN0YXR1cyBjb2RlcyBhcHByb3ByaWF0ZWx5JywgKCkgPT4ge1xuICAgICAgLy8gUmVhbCBzY2VuYXJpbzogZGlmZmVyZW50IGVycm9yIHR5cGVzIG5lZWQgZGlmZmVyZW50IGhhbmRsaW5nXG4gICAgICBjb25zdCBlcnJvclNjZW5hcmlvcyA9IFtcbiAgICAgICAgeyBzdGF0dXM6IDQwMCwgZGVzY3JpcHRpb246ICdCYWQgUmVxdWVzdCAtIHZhbGlkYXRpb24gZXJyb3JzJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxLCBkZXNjcmlwdGlvbjogJ1VuYXV0aG9yaXplZCAtIGF1dGggcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDMsIGRlc2NyaXB0aW9uOiAnRm9yYmlkZGVuIC0gaW5zdWZmaWNpZW50IHBlcm1pc3Npb25zJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0LCBkZXNjcmlwdGlvbjogJ05vdCBGb3VuZCAtIHJlc291cmNlIG1pc3NpbmcnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MjksIGRlc2NyaXB0aW9uOiAnUmF0ZSBMaW1pdGVkIC0gdG9vIG1hbnkgcmVxdWVzdHMnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAsIGRlc2NyaXB0aW9uOiAnU2VydmVyIEVycm9yIC0gaW50ZXJuYWwgaXNzdWVzJyB9LFxuICAgICAgXTtcblxuICAgICAgLy8gRWFjaCBlcnJvciB0eXBlIHNob3VsZCBiZSByZWNvZ25pemVkIGJ5IHN0YXR1cyB2YWxpZGF0aW9uXG4gICAgICBlcnJvclNjZW5hcmlvcy5mb3JFYWNoKCh7IHN0YXR1cyB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlU3RhdHVzID0gYXhpb3NDbGllbnQuZGVmYXVsdHMudmFsaWRhdGVTdGF0dXM7XG4gICAgICAgIGlmICh2YWxpZGF0ZVN0YXR1cykge1xuICAgICAgICAgIGV4cGVjdCh2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIGVycm9yIGxvZ2dpbmcgY29uZmlndXJlZCcsICgpID0+IHtcbiAgICAgIC8vIFJlYWwgc2NlbmFyaW86IGRldmVsb3BlcnMgbmVlZCBlcnJvciB2aXNpYmlsaXR5XG4gICAgICBleHBlY3QoYXhpb3NDbGllbnQuaW50ZXJjZXB0b3JzLnJlc3BvbnNlKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAvLyBDb25zb2xlIHNob3VsZCBiZSBhdmFpbGFibGUgZm9yIGVycm9yIGxvZ2dpbmdcbiAgICAgIGV4cGVjdChnbG9iYWwuY29uc29sZS5lcnJvcikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgdW5pcXVlIHJlcXVlc3QgSURzIGZvciBlcnJvciB0cmFja2luZycsICgpID0+IHtcbiAgICAgIC8vIFJlYWwgc2NlbmFyaW86IGVycm9ycyBuZWVkIHVuaXF1ZSBpZGVudGlmaWVycyBmb3IgdHJhY2luZ1xuICAgICAgZXhwZWN0KGF4aW9zQ2xpZW50LmludGVyY2VwdG9ycy5yZXF1ZXN0KS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAvLyBSZXF1ZXN0IGludGVyY2VwdG9yIHNob3VsZCBhZGQgdW5pcXVlIGlkZW50aWZpZXJzXG4gICAgICBjb25zdCByZXF1ZXN0SW50ZXJjZXB0b3JzID0gKGF4aW9zQ2xpZW50LmludGVyY2VwdG9ycy5yZXF1ZXN0IGFzIGFueSkuaGFuZGxlcnM7XG4gICAgICBleHBlY3QocmVxdWVzdEludGVyY2VwdG9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBSRVRSWSBMT0dJQyAtIFJFQUwgRU5URVJQUklTRSBTQ0VOQVJJT1NcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGRlc2NyaWJlKCdSZXRyeSBMb2dpYycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcmV0cnkgY29uZmlndXJhdGlvbiBhdmFpbGFibGUnLCAoKSA9PiB7XG4gICAgICAvLyBSZWFsIHNjZW5hcmlvOiBjbGllbnQgc2hvdWxkIHN1cHBvcnQgcmV0cnkgY29uZmlndXJhdGlvblxuICAgICAgZXhwZWN0KGF4aW9zQ2xpZW50LmludGVyY2VwdG9ycy5yZXNwb25zZSkudG9CZURlZmluZWQoKTtcblxuICAgICAgLy8gU2hvdWxkIGhhdmUgZXJyb3IgaGFuZGxpbmcgdGhhdCBzdXBwb3J0cyByZXRyaWVzXG4gICAgICBjb25zdCByZXNwb25zZUludGVyY2VwdG9ycyA9IChheGlvc0NsaWVudC5pbnRlcmNlcHRvcnMucmVzcG9uc2UgYXMgYW55KS5oYW5kbGVycztcbiAgICAgIGV4cGVjdChyZXNwb25zZUludGVyY2VwdG9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJldHJ5IGNvbmZpZ3VyYXRpb24gb3B0aW9ucycsICgpID0+IHtcbiAgICAgIC8vIFJlYWwgc2NlbmFyaW86IGRpZmZlcmVudCByZXF1ZXN0cyBuZWVkIGRpZmZlcmVudCByZXRyeSBzdHJhdGVnaWVzXG4gICAgICBjb25zdCByZXRyeUNvbmZpZ3MgPSBbXG4gICAgICAgIHsgc2tpcFJldHJ5OiB0cnVlLCByZXRyeUF0dGVtcHRzOiAwIH0sXG4gICAgICAgIHsgc2tpcFJldHJ5OiBmYWxzZSwgcmV0cnlBdHRlbXB0czogMyB9LFxuICAgICAgICB7IHJldHJ5QXR0ZW1wdHM6IDUgfSxcbiAgICAgIF07XG5cbiAgICAgIHJldHJ5Q29uZmlncy5mb3JFYWNoKChjb25maWcpID0+IHtcbiAgICAgICAgLy8gU2hvdWxkIGFjY2VwdCByZXRyeSBjb25maWd1cmF0aW9uIHdpdGhvdXQgZXJyb3JcbiAgICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgICBjb25zdCByZXF1ZXN0Q29uZmlnID0geyAuLi5jb25maWcsIHVybDogJy90ZXN0JyB9O1xuICAgICAgICAgIGV4cGVjdChyZXF1ZXN0Q29uZmlnKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgZXhwb25lbnRpYWwgYmFja29mZiBjb25zdGFudHMgZGVmaW5lZCcsICgpID0+IHtcbiAgICAgIC8vIFJlYWwgc2NlbmFyaW86IHJldHJ5IGRlbGF5cyBzaG91bGQgaW5jcmVhc2UgZXhwb25lbnRpYWxseVxuICAgICAgLy8gQ2hlY2sgdGhhdCByZXRyeSBsb2dpYyBleGlzdHMgaW4gdGhlIGNsaWVudFxuICAgICAgZXhwZWN0KGF4aW9zQ2xpZW50LmludGVyY2VwdG9ycy5yZXNwb25zZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIHJldHJ5YWJsZSBhbmQgbm9uLXJldHJ5YWJsZSBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICAvLyBSZWFsIHNjZW5hcmlvOiA0eHggZXJyb3JzIHNob3VsZCBub3QgcmV0cnksIDV4eCBzaG91bGQgcmV0cnlcbiAgICAgIGNvbnN0IG5vblJldHJ5YWJsZVN0YXR1c2VzID0gWzQwMCwgNDAxLCA0MDMsIDQwNCwgNDIyXTtcbiAgICAgIGNvbnN0IHJldHJ5YWJsZVN0YXR1c2VzID0gWzUwMCwgNTAyLCA1MDMsIDUwNF07XG5cbiAgICAgIG5vblJldHJ5YWJsZVN0YXR1c2VzLmZvckVhY2goKHN0YXR1cykgPT4ge1xuICAgICAgICAvLyBDbGllbnQgZXJyb3JzIHNob3VsZCBub3QgYmUgcmV0cmllZFxuICAgICAgICBleHBlY3Qoc3RhdHVzKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDQwMCk7XG4gICAgICAgIGV4cGVjdChzdGF0dXMpLnRvQmVMZXNzVGhhbig1MDApO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHJ5YWJsZVN0YXR1c2VzLmZvckVhY2goKHN0YXR1cykgPT4ge1xuICAgICAgICAvLyBTZXJ2ZXIgZXJyb3JzIGNhbiBiZSByZXRyaWVkXG4gICAgICAgIGV4cGVjdChzdGF0dXMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoNTAwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFBFUkZPUk1BTkNFIE1PTklUT1JJTkcgLSBSRUFMIEVOVEVSUFJJU0UgU0NFTkFSSU9TXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgTW9uaXRvcmluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcmVxdWVzdCB0aW1pbmcgaW5mcmFzdHJ1Y3R1cmUnLCAoKSA9PiB7XG4gICAgICAvLyBSZWFsIHNjZW5hcmlvOiBwZXJmb3JtYW5jZSB0cmFja2luZyBzaG91bGQgYmUgYnVpbHQtaW5cbiAgICAgIGV4cGVjdChheGlvc0NsaWVudC5pbnRlcmNlcHRvcnMucmVxdWVzdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChheGlvc0NsaWVudC5pbnRlcmNlcHRvcnMucmVzcG9uc2UpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgIC8vIFNob3VsZCBoYXZlIHRpbWluZyBjYXBhYmlsaXR5XG4gICAgICBleHBlY3QoRGF0ZS5ub3cpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHJlcXVlc3QgSURzIGZvciB0cmFjaW5nJywgKCkgPT4ge1xuICAgICAgLy8gUmVhbCBzY2VuYXJpbzogZWFjaCByZXF1ZXN0IG5lZWRzIHVuaXF1ZSBpZGVudGlmaWVyXG4gICAgICBleHBlY3QoYXhpb3NDbGllbnQuaW50ZXJjZXB0b3JzLnJlcXVlc3QpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgIC8vIFNob3VsZCBoYXZlIHJlcXVlc3QgaW50ZXJjZXB0b3IgZm9yIGFkZGluZyBJRHNcbiAgICAgIGNvbnN0IHJlcXVlc3RJbnRlcmNlcHRvcnMgPSAoYXhpb3NDbGllbnQuaW50ZXJjZXB0b3JzLnJlcXVlc3QgYXMgYW55KS5oYW5kbGVycztcbiAgICAgIGV4cGVjdChyZXF1ZXN0SW50ZXJjZXB0b3JzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IHBlcmZvcm1hbmNlIG1vbml0b3JpbmcgaG9va3MnLCAoKSA9PiB7XG4gICAgICAvLyBSZWFsIHNjZW5hcmlvOiBlbnRlcnByaXNlcyBpbnRlZ3JhdGUgd2l0aCB0aGVpciBtb25pdG9yaW5nXG4gICAgICBjb25zdCBtb2NrUGVyZm9ybWFuY2VUcmFja2VyID0gamVzdC5mbigpO1xuICAgICAgKHdpbmRvdyBhcyBhbnkpLl9fUkVTVF9QRVJGT1JNQU5DRV9UUkFDS0VSX18gPSBtb2NrUGVyZm9ybWFuY2VUcmFja2VyO1xuXG4gICAgICAvLyBTaG91bGQgYmUgYWJsZSB0byBhdHRhY2ggY3VzdG9tIG1vbml0b3JpbmdcbiAgICAgIGV4cGVjdCgod2luZG93IGFzIGFueSkuX19SRVNUX1BFUkZPUk1BTkNFX1RSQUNLRVJfXykudG9CZURlZmluZWQoKTtcblxuICAgICAgZGVsZXRlICh3aW5kb3cgYXMgYW55KS5fX1JFU1RfUEVSRk9STUFOQ0VfVFJBQ0tFUl9fO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciBoZWFkZXJzIGZvciBtb25pdG9yaW5nJywgKCkgPT4ge1xuICAgICAgLy8gUmVhbCBzY2VuYXJpbzogbW9uaXRvcmluZyByZXF1aXJlcyBjbGllbnQgaWRlbnRpZmljYXRpb25cbiAgICAgIGV4cGVjdChheGlvc0NsaWVudC5kZWZhdWx0cy5oZWFkZXJzKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAvLyBTaG91bGQgaWRlbnRpZnkgdGhlIGNsaWVudCBmb3IgbW9uaXRvcmluZ1xuICAgICAgY29uc3QgaGVhZGVycyA9IGF4aW9zQ2xpZW50LmRlZmF1bHRzLmhlYWRlcnM7XG4gICAgICBleHBlY3QoaGVhZGVycykudG9IYXZlUHJvcGVydHkoJ0FjY2VwdCcpO1xuICAgICAgZXhwZWN0KGhlYWRlcnMpLnRvSGF2ZVByb3BlcnR5KCdDb250ZW50LVR5cGUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBEQVRBIFRSQU5TRk9STUFUSU9OIC0gUkVBTCBFTlRFUlBSSVNFIFNDRU5BUklPU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZGVzY3JpYmUoJ0RhdGEgVHJhbnNmb3JtYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcGxleCBkYXRhIHNlcmlhbGl6YXRpb24nLCAoKSA9PiB7XG4gICAgICAvLyBSZWFsIHNjZW5hcmlvOiBvYmplY3RzIHNob3VsZCBiZSBwcm9wZXJseSBzZXJpYWxpemVkXG4gICAgICBjb25zdCBjb21wbGV4RGF0YSA9IHtcbiAgICAgICAgdXNlcjogeyBpZDogMTIzLCBuYW1lOiAnVGVzdCBVc2VyJyB9LFxuICAgICAgICBtZXRhZGF0YTogeyB0aW1lc3RhbXA6IERhdGUubm93KCksIHZlcnNpb246ICcxLjAnIH0sXG4gICAgICAgIHBlcm1pc3Npb25zOiBbJ3JlYWQnLCAnd3JpdGUnXSxcbiAgICAgICAgbmVzdGVkQXJyYXk6IFt7IGlkOiAxLCBkYXRhOiAndGVzdCcgfV0sXG4gICAgICB9O1xuXG4gICAgICAvLyBTaG91bGQgc2VyaWFsaXplIGNvbXBsZXggb2JqZWN0cyB3aXRob3V0IGVycm9yXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBKU09OLnN0cmluZ2lmeShjb21wbGV4RGF0YSk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuXG4gICAgICBjb25zdCBzZXJpYWxpemVkID0gSlNPTi5zdHJpbmdpZnkoY29tcGxleERhdGEpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBzZXJpYWxpemVkKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgIGV4cGVjdChzZXJpYWxpemVkLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmVzcG9uc2UgdHJhbnNmb3JtYXRpb24gc2V0dXAnLCAoKSA9PiB7XG4gICAgICAvLyBSZWFsIHNjZW5hcmlvOiByZXNwb25zZXMgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkgcGFyc2VkXG4gICAgICBleHBlY3QoYXhpb3NDbGllbnQuaW50ZXJjZXB0b3JzLnJlc3BvbnNlKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAvLyBTaG91bGQgaGF2ZSByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbiBjYXBhYmlsaXR5XG4gICAgICBjb25zdCByZXNwb25zZUludGVyY2VwdG9ycyA9IChheGlvc0NsaWVudC5pbnRlcmNlcHRvcnMucmVzcG9uc2UgYXMgYW55KS5oYW5kbGVycztcbiAgICAgIGV4cGVjdChyZXNwb25zZUludGVyY2VwdG9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2V0IGFwcHJvcHJpYXRlIGNvbnRlbnQtdHlwZSBoZWFkZXJzJywgKCkgPT4ge1xuICAgICAgLy8gUmVhbCBzY2VuYXJpbzogc2VydmVycyBuZWVkIHByb3BlciBjb250ZW50LXR5cGVcbiAgICAgIGNvbnN0IGRlZmF1bHRzID0gYXhpb3NDbGllbnQuZGVmYXVsdHM7XG4gICAgICBleHBlY3QoZGVmYXVsdHMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10pLnRvQmUoJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIGV4cGVjdChkZWZhdWx0cy5oZWFkZXJzWydBY2NlcHQnXSkudG9CZSgnYXBwbGljYXRpb24vanNvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGlmZmVyZW50IGRhdGEgdHlwZXMgYXBwcm9wcmlhdGVseScsICgpID0+IHtcbiAgICAgIC8vIFJlYWwgc2NlbmFyaW86IHZhcmlvdXMgZGF0YSB0eXBlcyBzaG91bGQgYmUgc3VwcG9ydGVkXG4gICAgICBjb25zdCBkYXRhVHlwZXMgPSBbXG4gICAgICAgIHsgdHlwZTogJ29iamVjdCcsIGRhdGE6IHsga2V5OiAndmFsdWUnIH0gfSxcbiAgICAgICAgeyB0eXBlOiAnYXJyYXknLCBkYXRhOiBbMSwgMiwgM10gfSxcbiAgICAgICAgeyB0eXBlOiAnc3RyaW5nJywgZGF0YTogJ3NpbXBsZSBzdHJpbmcnIH0sXG4gICAgICAgIHsgdHlwZTogJ251bWJlcicsIGRhdGE6IDQyIH0sXG4gICAgICAgIHsgdHlwZTogJ2Jvb2xlYW4nLCBkYXRhOiB0cnVlIH0sXG4gICAgICBdO1xuXG4gICAgICBkYXRhVHlwZXMuZm9yRWFjaCgoeyBkYXRhIH0pID0+IHtcbiAgICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgfSkubm90LnRvVGhyb3coKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIENPTkZJR1VSQVRJT04gLSBSRUFMIEVOVEVSUFJJU0UgU0NFTkFSSU9TXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBkZXNjcmliZSgnQ29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVzZSBlbnRlcnByaXNlLWFwcHJvcHJpYXRlIHRpbWVvdXRzJywgKCkgPT4ge1xuICAgICAgLy8gUmVhbCBzY2VuYXJpbzogZW50ZXJwcmlzZSBuZXR3b3JrcyBuZWVkIHJlYXNvbmFibGUgdGltZW91dHNcbiAgICAgIGV4cGVjdChheGlvc0NsaWVudC5kZWZhdWx0cy50aW1lb3V0KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoYXhpb3NDbGllbnQuZGVmYXVsdHMudGltZW91dCkudG9CZUxlc3NUaGFuT3JFcXVhbCgzMDAwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgYmFzZSBVUkwgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIC8vIFJlYWwgc2NlbmFyaW86IGRpZmZlcmVudCBlbnZpcm9ubWVudHMgaGF2ZSBkaWZmZXJlbnQgYmFzZSBVUkxzXG4gICAgICBleHBlY3QoYXhpb3NDbGllbnQuZGVmYXVsdHMuYmFzZVVSTCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJlZGlyZWN0cyBhcHByb3ByaWF0ZWx5JywgKCkgPT4ge1xuICAgICAgLy8gUmVhbCBzY2VuYXJpbzogZW50ZXJwcmlzZSBwcm94aWVzIG1heSByZWRpcmVjdFxuICAgICAgZXhwZWN0KGF4aW9zQ2xpZW50LmRlZmF1bHRzLm1heFJlZGlyZWN0cykudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBzdGF0dXMgY29kZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgLy8gUmVhbCBzY2VuYXJpbzogb25seSAyeHggc2hvdWxkIGJlIGNvbnNpZGVyZWQgc3VjY2Vzc1xuICAgICAgY29uc3QgdmFsaWRhdGVTdGF0dXMgPSBheGlvc0NsaWVudC5kZWZhdWx0cy52YWxpZGF0ZVN0YXR1cztcbiAgICAgIGV4cGVjdCh2YWxpZGF0ZVN0YXR1cykudG9CZURlZmluZWQoKTtcbiAgICAgIGlmICh2YWxpZGF0ZVN0YXR1cykge1xuICAgICAgICBleHBlY3QodmFsaWRhdGVTdGF0dXMoMjAwKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkYXRlU3RhdHVzKDIwMSkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdCh2YWxpZGF0ZVN0YXR1cyg0MDApKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkYXRlU3RhdHVzKDUwMCkpLnRvQmUoZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnQXhpb3MgQ2xpZW50IEludGVncmF0aW9uJywgKCkgPT4ge1xuICBpdCgnc2hvdWxkIGJlIHJlYWR5IGZvciByZWFsIGVudGVycHJpc2UgUkVTVCBBUElzJywgKCkgPT4ge1xuICAgIC8vIFJlYWwgc2NlbmFyaW86IHByb2R1Y3Rpb24gcmVhZGluZXNzIGNoZWNrXG4gICAgZXhwZWN0KGF4aW9zQ2xpZW50LmRlZmF1bHRzKS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdChheGlvc0NsaWVudC5pbnRlcmNlcHRvcnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHR5cGVvZiBnZXQpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgZXhwZWN0KHR5cGVvZiBwb3N0KS50b0JlKCdmdW5jdGlvbicpO1xuICAgIGV4cGVjdCh0eXBlb2YgcHV0KS50b0JlKCdmdW5jdGlvbicpO1xuICAgIGV4cGVjdCh0eXBlb2YgcGF0Y2gpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgZXhwZWN0KHR5cGVvZiBkZWwpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgd29yayB3aXRoIHN0YW5kYXJkIFJFU1QgQVBJIGNvbnZlbnRpb25zJywgKCkgPT4ge1xuICAgIC8vIFJlYWwgc2NlbmFyaW86IGZvbGxvd3MgUkVTVCBiZXN0IHByYWN0aWNlc1xuICAgIGNvbnN0IHJlc3RPcGVyYXRpb25zID0gW1xuICAgICAgeyBtZXRob2Q6IGdldCwgdXJsOiAnL3VzZXJzJywgZGVzY3JpcHRpb246ICdMaXN0IHJlc291cmNlcycgfSxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiAodXJsOiBzdHJpbmcpID0+IGdldChgJHt1cmx9LzEyM2ApLFxuICAgICAgICB1cmw6ICcvdXNlcnMnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0dldCBzcGVjaWZpYyByZXNvdXJjZScsXG4gICAgICB9LFxuICAgICAgeyBtZXRob2Q6ICh1cmw6IHN0cmluZykgPT4gcG9zdCh1cmwsIHt9KSwgdXJsOiAnL3VzZXJzJywgZGVzY3JpcHRpb246ICdDcmVhdGUgcmVzb3VyY2UnIH0sXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogKHVybDogc3RyaW5nKSA9PiBwdXQoYCR7dXJsfS8xMjNgLCB7fSksXG4gICAgICAgIHVybDogJy91c2VycycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlIHJlc291cmNlJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogKHVybDogc3RyaW5nKSA9PiBwYXRjaChgJHt1cmx9LzEyM2AsIHt9KSxcbiAgICAgICAgdXJsOiAnL3VzZXJzJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdQYXJ0aWFsIHVwZGF0ZScsXG4gICAgICB9LFxuICAgICAgeyBtZXRob2Q6ICh1cmw6IHN0cmluZykgPT4gZGVsKGAke3VybH0vMTIzYCksIHVybDogJy91c2VycycsIGRlc2NyaXB0aW9uOiAnRGVsZXRlIHJlc291cmNlJyB9LFxuICAgIF07XG5cbiAgICByZXN0T3BlcmF0aW9ucy5mb3JFYWNoKCh7IG1ldGhvZCwgdXJsIH0pID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIG1ldGhvZCh1cmwpLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAvLyBFeHBlY3RlZCBuZXR3b3JrIGVycm9yIGluIHRlc3QgZW52aXJvbm1lbnRcbiAgICAgICAgfSk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9