{"file":"/Users/gamzaramazanov/Desktop/fumo/src/infrastructure/providers/app-loading/hooks/useAppLoading.test.ts","mappings":"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","names":[],"sources":["/Users/gamzaramazanov/Desktop/fumo/src/infrastructure/providers/app-loading/hooks/useAppLoading.test.ts"],"sourcesContent":["/**\n * useAppLoading Hook Tests\n *\n * Comprehensive tests for initial app loading functionality.\n * Tests all loading conditions, error handling, and state management.\n */\n\nimport { renderHook, act, waitFor } from \"@testing-library/react\";\nimport { useAppLoading } from \"./useAppLoading\";\n\n// ============================================================================\n// MOCK SETUP\n// ============================================================================\n\n// Mock performance API\nObject.defineProperty(window, \"performance\", {\n  writable: true,\n  value: {\n    now: jest.fn(() => Date.now()),\n  },\n});\n\n// Mock document methods\nconst mockQuerySelectorAll = jest.fn();\nconst mockQuerySelector = jest.fn();\nconst mockHasAttribute = jest.fn();\nconst mockClassList = {\n  contains: jest.fn(),\n};\n\n// Mock document.readyState as read-only property\nlet mockReadyState = \"complete\";\n\nObject.defineProperty(document, \"readyState\", {\n  get: () => mockReadyState,\n  configurable: true,\n});\n\nObject.defineProperty(document, \"querySelectorAll\", {\n  value: mockQuerySelectorAll,\n  writable: true,\n});\n\nObject.defineProperty(document, \"querySelector\", {\n  value: mockQuerySelector,\n  writable: true,\n});\n\nObject.defineProperty(document.documentElement, \"hasAttribute\", {\n  value: mockHasAttribute,\n});\n\nObject.defineProperty(document.documentElement, \"classList\", {\n  value: mockClassList,\n});\n\nObject.defineProperty(document.body, \"classList\", {\n  value: mockClassList,\n});\n\n// ============================================================================\n// TEST UTILITIES\n// ============================================================================\n\nconst setupDOM = (options: {\n  readyState?: string;\n  criticalCSS?: boolean;\n  theme?: boolean;\n  performanceNow?: number;\n}) => {\n  // Set document readyState\n  mockReadyState = options.readyState || \"complete\";\n\n  // Mock critical CSS\n  if (options.criticalCSS) {\n    mockQuerySelectorAll.mockReturnValue([\n      { sheet: { cssRules: [] } }, // Simulate loaded stylesheet\n    ]);\n  } else {\n    mockQuerySelectorAll.mockReturnValue([]);\n  }\n\n  // Mock theme\n  mockHasAttribute.mockReturnValue(options.theme || false);\n  mockClassList.contains.mockReturnValue(options.theme || false);\n\n  // Mock performance\n  if (options.performanceNow) {\n    (window.performance.now as jest.Mock).mockReturnValue(\n      options.performanceNow\n    );\n  }\n};\n\n// Helper to wait for hook to stabilize\nconst waitForHookStabilization = async () => {\n  await act(async () => {\n    jest.runAllTimers();\n  });\n  await new Promise((resolve) => setTimeout(resolve, 0));\n};\n\n// ============================================================================\n// TESTS\n// ============================================================================\n\ndescribe(\"useAppLoading\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    jest.useFakeTimers();\n\n    // Reset DOM state\n    setupDOM({\n      readyState: \"complete\",\n      criticalCSS: true,\n      theme: true,\n    });\n  });\n\n  afterEach(() => {\n    jest.useRealTimers();\n  });\n\n  describe(\"Initial State\", () => {\n    it(\"should start with loading state\", async () => {\n      const { result } = renderHook(() => useAppLoading());\n\n      // Wait for initial setup to complete\n      await waitForHookStabilization();\n\n      expect(result.current.isInitialLoading).toBe(true);\n      expect(result.current.progress).toBeGreaterThanOrEqual(0);\n      expect(result.current.currentStep).toBeDefined();\n      expect(result.current.steps).toBeDefined();\n    });\n\n    it(\"should have forceComplete and restart functions\", () => {\n      const { result } = renderHook(() => useAppLoading());\n\n      expect(typeof result.current.forceComplete).toBe(\"function\");\n      expect(typeof result.current.restart).toBe(\"function\");\n    });\n  });\n\n  describe(\"DOM Ready Check\", () => {\n    it(\"should complete when DOM is ready\", async () => {\n      setupDOM({ readyState: \"complete\" });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      await waitForHookStabilization();\n\n      expect(result.current.progress).toBeGreaterThan(0);\n    });\n\n    it(\"should handle DOM not ready\", async () => {\n      setupDOM({ readyState: \"loading\" });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      await act(async () => {\n        jest.advanceTimersByTime(3000); // Wait for timeout\n      });\n\n      expect(result.current.progress).toBeGreaterThan(0);\n    });\n  });\n\n  describe(\"Critical CSS Check\", () => {\n    it(\"should complete when critical CSS is loaded\", async () => {\n      setupDOM({\n        readyState: \"complete\",\n        criticalCSS: true,\n      });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      await waitForHookStabilization();\n\n      expect(\n        result.current.steps.some(\n          (step) => step.id === \"critical-css\" && step.completed\n        )\n      ).toBe(true);\n    });\n\n    it(\"should complete when no critical CSS defined\", async () => {\n      setupDOM({\n        readyState: \"complete\",\n        criticalCSS: false,\n      });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      await waitForHookStabilization();\n\n      expect(\n        result.current.steps.some(\n          (step) => step.id === \"critical-css\" && step.completed\n        )\n      ).toBe(true);\n    });\n  });\n\n  describe(\"Theme Check\", () => {\n    it(\"should complete when theme is initialized\", async () => {\n      setupDOM({\n        readyState: \"complete\",\n        theme: true,\n      });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      await waitForHookStabilization();\n\n      expect(\n        result.current.steps.some(\n          (step) => step.id === \"theme-initialized\" && step.completed\n        )\n      ).toBe(true);\n    });\n\n    it(\"should handle theme not initialized\", async () => {\n      setupDOM({\n        readyState: \"complete\",\n        theme: false,\n      });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      await act(async () => {\n        jest.advanceTimersByTime(3000); // Wait for timeout\n      });\n\n      expect(result.current.progress).toBeGreaterThan(0);\n    });\n  });\n\n  describe(\"Minimum Display Time\", () => {\n    it(\"should wait for minimum display time\", async () => {\n      setupDOM({ readyState: \"complete\" });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      // Fast forward to minimum time\n      await act(async () => {\n        jest.advanceTimersByTime(1200);\n      });\n\n      expect(\n        result.current.steps.some(\n          (step) => step.id === \"minimum-display-time\" && step.completed\n        )\n      ).toBe(true);\n    });\n  });\n\n  describe(\"Progress Tracking\", () => {\n    it(\"should update progress as conditions complete\", async () => {\n      setupDOM({ readyState: \"complete\" });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      await waitForHookStabilization();\n\n      await waitFor(() => {\n        expect(result.current.progress).toBe(100);\n      });\n    });\n\n    it(\"should update current step\", async () => {\n      setupDOM({ readyState: \"complete\" });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      await waitForHookStabilization();\n\n      await waitFor(() => {\n        expect(result.current.currentStep).toBe(\"Ready\");\n      });\n    });\n  });\n\n  describe(\"Force Complete\", () => {\n    it(\"should force complete loading\", async () => {\n      const { result } = renderHook(() => useAppLoading());\n\n      await act(async () => {\n        result.current.forceComplete();\n      });\n\n      expect(result.current.isInitialLoading).toBe(false);\n      expect(result.current.progress).toBe(100);\n      expect(result.current.currentStep).toBe(\"Ready\");\n    });\n  });\n\n  describe(\"Restart\", () => {\n    it(\"should restart loading process\", async () => {\n      const { result } = renderHook(() => useAppLoading());\n\n      // Force complete first\n      await act(async () => {\n        result.current.forceComplete();\n      });\n\n      // Then restart\n      await act(async () => {\n        result.current.restart();\n      });\n\n      expect(result.current.isInitialLoading).toBe(true);\n      expect(result.current.progress).toBe(0);\n      expect(result.current.currentStep).toBe(\"\");\n    });\n  });\n\n  describe(\"Error Handling\", () => {\n    it(\"should handle condition check failures gracefully\", async () => {\n      setupDOM({ readyState: \"complete\" });\n\n      // Mock a failing condition by making querySelectorAll throw\n      mockQuerySelectorAll.mockImplementation(() => {\n        throw new Error(\"DOM Error\");\n      });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      await act(async () => {\n        jest.advanceTimersByTime(3000);\n      });\n\n      expect(result.current.progress).toBeGreaterThan(0);\n\n      // Restore mock\n      mockQuerySelectorAll.mockReturnValue([]);\n    });\n  });\n\n  describe(\"Complete Loading Flow\", () => {\n    it(\"should complete full loading sequence\", async () => {\n      setupDOM({\n        readyState: \"complete\",\n        criticalCSS: true,\n        theme: true,\n      });\n\n      const { result } = renderHook(() => useAppLoading());\n\n      await waitForHookStabilization();\n\n      await waitFor(() => {\n        expect(result.current.isInitialLoading).toBe(false);\n        expect(result.current.progress).toBe(100);\n        expect(result.current.currentStep).toBe(\"Ready\");\n        expect(result.current.steps.every((step) => step.completed)).toBe(true);\n      });\n    });\n  });\n});\n"],"version":3}