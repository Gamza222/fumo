{"version":3,"names":["cov_1hocedzwit","actualCoverage","exports","initWebVitals","s","checkPerformanceBudget","getPerformanceRating","web_vitals_1","require","defaultConfig","debug","process","env","NODE_ENV","reportToSentry","reportToAnalytics","metric","config","f","analytics","b","captureException","rating","Error","concat","name","tags","extra","value","delta","error","console","log","finalConfig","__assign","onCLS","onINP","onLCP","onFCP","onTTFB","PERFORMANCE_BUDGETS","LCP","INP","CLS","FCP","TTFB","budget"],"sources":["/Users/gamzaramazanov/Desktop/fumo/src/infrastructure/performance/lib/web-vitals/web-vitals.ts"],"sourcesContent":["import { onCLS, onFCP, onINP, onLCP, onTTFB } from 'web-vitals';\nimport type { WebVitalsConfig } from '../../types/performance.types';\n\n/**\n * Default Web Vitals configuration\n */\nconst defaultConfig: WebVitalsConfig = {\n  debug: process.env.NODE_ENV === 'development',\n  reportToSentry: true,\n};\n\n/**\n * Report Web Vitals to analytics\n */\nfunction reportToAnalytics(\n  metric: { name: string; value: number; delta: number; rating: string },\n  config: WebVitalsConfig\n) {\n  // Report to custom analytics if provided\n  if (config.analytics) {\n    config.analytics(metric);\n  }\n\n  // Report to Sentry if enabled\n  if (config.reportToSentry) {\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-var-requires, @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call\n      const { captureException } = require('@sentry/nextjs');\n      if (metric.rating === 'poor') {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        captureException(new Error(`Poor Web Vital: ${metric.name}`), {\n          tags: {\n            metric: metric.name,\n            rating: metric.rating,\n          },\n          extra: {\n            value: metric.value,\n            delta: metric.delta,\n          },\n        });\n      }\n    } catch (error) {\n      // Sentry not available\n    }\n  }\n\n  // Debug logging\n  if (config.debug) {\n    // eslint-disable-next-line no-console\n    console.log('Web Vital:', {\n      name: metric.name,\n      value: metric.value,\n      rating: metric.rating,\n      delta: metric.delta,\n    });\n  }\n}\n\n/**\n * Initialize Web Vitals monitoring\n */\nexport function initWebVitals(config: WebVitalsConfig = {}) {\n  const finalConfig = { ...defaultConfig, ...config };\n\n  onCLS((metric) => reportToAnalytics(metric, finalConfig));\n  onINP((metric) => reportToAnalytics(metric, finalConfig));\n  onLCP((metric) => reportToAnalytics(metric, finalConfig));\n  onFCP((metric) => reportToAnalytics(metric, finalConfig));\n  onTTFB((metric) => reportToAnalytics(metric, finalConfig));\n}\n\n/**\n * Performance budgets for Web Vitals\n */\nexport const PERFORMANCE_BUDGETS = {\n  // Core Web Vitals thresholds\n  LCP: 2500, // Largest Contentful Paint (ms)\n  INP: 200, // Interaction to Next Paint (ms)\n  CLS: 0.1, // Cumulative Layout Shift\n\n  // Additional metrics\n  FCP: 1800, // First Contentful Paint (ms)\n  TTFB: 800, // Time to First Byte (ms)\n};\n\n/**\n * Check if metric meets performance budget\n */\nexport function checkPerformanceBudget(metric: { name: string; value: number }): boolean {\n  const budget = PERFORMANCE_BUDGETS[metric.name as keyof typeof PERFORMANCE_BUDGETS];\n  if (!budget) return true;\n\n  return metric.value <= budget;\n}\n\n/**\n * Get performance rating based on thresholds\n */\nexport function getPerformanceRating(metric: {\n  name: string;\n  value: number;\n}): 'good' | 'needs-improvement' | 'poor' {\n  const budget = PERFORMANCE_BUDGETS[metric.name as keyof typeof PERFORMANCE_BUDGETS];\n  if (!budget) return 'good';\n\n  if (metric.value <= budget * 0.75) return 'good';\n  if (metric.value <= budget) return 'needs-improvement';\n  return 'poor';\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}