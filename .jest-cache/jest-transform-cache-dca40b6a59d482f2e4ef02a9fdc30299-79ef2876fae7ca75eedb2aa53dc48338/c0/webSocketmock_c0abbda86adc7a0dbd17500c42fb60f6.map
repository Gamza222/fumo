{"version":3,"names":["cov_1nxpf2afw9","actualCoverage","s","WebSocketMock","f","_url","_this","messageHandlers","isConnected","setTimeout","emit","prototype","addEventListener","type","handler","b","push","removeEventListener","index","indexOf","splice","send","_data","Error","mockMessage","message","event","MessageEvent","data","JSON","stringify","forEach","close","Event","dispatchEvent","_event","exports","global","WebSocket","createWebSocketMock","url"],"sources":["/Users/gamzaramazanov/Desktop/fumo/src/shared/testing/mocks/api/lib/websocket/webSocket.mock.ts"],"sourcesContent":["import { mockWebSocketInstanceInterface, mockWebSocketMessageInterface } from '../../types/types';\n\nexport class WebSocketMock implements mockWebSocketInstanceInterface {\n  private messageHandlers: ((event: MessageEvent) => void)[] = [];\n  private isConnected = false;\n\n  constructor(_url: string) {\n    // Simulate immediate connection\n    setTimeout(() => {\n      this.isConnected = true;\n      this.emit('open');\n    }, 0);\n  }\n\n  addEventListener(type: string, handler: (event: MessageEvent) => void): void {\n    if (type === 'message') {\n      this.messageHandlers.push(handler);\n    }\n  }\n\n  removeEventListener(type: string, handler: (event: MessageEvent) => void): void {\n    if (type === 'message') {\n      const index = this.messageHandlers.indexOf(handler);\n      if (index !== -1) {\n        this.messageHandlers.splice(index, 1);\n      }\n    }\n  }\n\n  send(_data: string): void {\n    if (!this.isConnected) {\n      throw new Error('WebSocket is not connected');\n    }\n  }\n\n  mockMessage(message: mockWebSocketMessageInterface): void {\n    const event = new MessageEvent('message', {\n      data: JSON.stringify(message),\n    });\n    this.messageHandlers.forEach((handler) => handler(event));\n  }\n\n  close(): void {\n    this.isConnected = false;\n    this.emit('close');\n  }\n\n  private emit(type: string): void {\n    const event = new Event(type);\n    this.dispatchEvent(event);\n  }\n\n  private dispatchEvent(_event: Event): boolean {\n    return true;\n  }\n}\n\n// Type assertion to WebSocket constructor type\nglobal.WebSocket = WebSocketMock as unknown as typeof WebSocket;\n\nexport const createWebSocketMock = (url: string): mockWebSocketInstanceInterface =>\n  new WebSocketMock(url);\n"],"mappings":"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","ignoreList":[]}