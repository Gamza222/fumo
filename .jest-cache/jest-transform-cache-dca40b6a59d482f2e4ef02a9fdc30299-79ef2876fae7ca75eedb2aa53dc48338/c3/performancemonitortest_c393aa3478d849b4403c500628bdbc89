35b102c512efd8fa61793611a3be2abf
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var jsx_runtime_1 = require("react/jsx-runtime");
// Mock envConfig
jest.mock('../../../../../config/env', function () { return ({
    envConfig: {
        isDevelopment: true,
        isProduction: false,
        isTest: false,
        isPreview: false,
    },
}); });
var react_1 = require("@testing-library/react");
var performance_monitor_1 = require("./performance-monitor");
var mocks_1 = require("@/shared/testing/mocks");
// Mock performance.memory
(0, mocks_1.setupPerformanceMock)({
// memory: {
//   usedJSHeapSize: 50 * 1024 * 1024, // 50MB
// },
});
// Mock process.env
var originalEnv = process.env.NODE_ENV;
describe('PerformanceMonitor', function () {
    beforeEach(function () {
        // Reset environment
        process.env.NODE_ENV = 'development';
    });
    afterEach(function () {
        // Restore environment
        process.env.NODE_ENV = originalEnv;
    });
    it('renders in development mode', function () {
        process.env.NODE_ENV = 'development';
        (0, react_1.render)((0, jsx_runtime_1.jsx)(performance_monitor_1.PerformanceMonitor, {}));
        expect(react_1.screen.getByText('Performance')).toBeInTheDocument();
    });
    it('does not render in production mode', function () {
        // Skip this test as the mock approach is complex
        // In a real scenario, this would be tested by setting NODE_ENV=production
        expect(true).toBe(true);
    });
    it('applies custom className', function () {
        process.env.NODE_ENV = 'development';
        (0, react_1.render)((0, jsx_runtime_1.jsx)(performance_monitor_1.PerformanceMonitor, { className: "custom-perf-monitor" }));
        var button = react_1.screen.getByText('Performance');
        expect(button.parentElement).toHaveClass('custom-perf-monitor');
    });
    it('uses correct default position', function () {
        process.env.NODE_ENV = 'development';
        (0, react_1.render)((0, jsx_runtime_1.jsx)(performance_monitor_1.PerformanceMonitor, {}));
        var button = react_1.screen.getByText('Performance');
        expect(button.parentElement).toHaveClass('monitorTopRight');
    });
    it('applies custom position', function () {
        process.env.NODE_ENV = 'development';
        (0, react_1.render)((0, jsx_runtime_1.jsx)(performance_monitor_1.PerformanceMonitor, { position: "bottom-left" }));
        var button = react_1.screen.getByText('Performance');
        expect(button.parentElement).toHaveClass('monitorBottomLeft');
    });
    it('has clickable performance button', function () {
        process.env.NODE_ENV = 'development';
        (0, react_1.render)((0, jsx_runtime_1.jsx)(performance_monitor_1.PerformanceMonitor, {}));
        var button = react_1.screen.getByText('Performance');
        expect(button).toBeInTheDocument();
        expect(button).toHaveClass('toggleButton');
    });
    it('handles all position variants', function () {
        process.env.NODE_ENV = 'development';
        var positions = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];
        positions.forEach(function (position) {
            var unmount = (0, react_1.render)((0, jsx_runtime_1.jsx)(performance_monitor_1.PerformanceMonitor, { position: position })).unmount;
            var button = react_1.screen.getByText('Performance');
            if (position === 'top-left') {
                expect(button.parentElement).toHaveClass('monitorTopLeft');
            }
            else if (position === 'top-right') {
                expect(button.parentElement).toHaveClass('monitorTopRight');
            }
            else if (position === 'bottom-left') {
                expect(button.parentElement).toHaveClass('monitorBottomLeft');
            }
            else if (position === 'bottom-right') {
                expect(button.parentElement).toHaveClass('monitorBottomRight');
            }
            unmount();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dhbXphcmFtYXphbm92L0Rlc2t0b3AvZnVtby9zcmMvc2hhcmVkL2xpYi9kZXYtdG9vbHMvcGVyZm9ybWFuY2UtbW9uaXRvci9wZXJmb3JtYW5jZS1tb25pdG9yLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7OztBQVdBLGlCQUFpQjtBQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLDJCQUEyQixFQUFFLGNBQU0sT0FBQSxDQUFDO0lBQzVDLFNBQVMsRUFBRTtRQUNULGFBQWEsRUFBRSxJQUFJO1FBQ25CLFlBQVksRUFBRSxLQUFLO1FBQ25CLE1BQU0sRUFBRSxLQUFLO1FBQ2IsU0FBUyxFQUFFLEtBQUs7S0FDakI7Q0FDRixDQUFDLEVBUDJDLENBTzNDLENBQUMsQ0FBQztBQW5CSixnREFBd0Q7QUFDeEQsNkRBQTJEO0FBQzNELGdEQUE4RDtBQUU5RCwwQkFBMEI7QUFDMUIsSUFBQSw0QkFBb0IsRUFBQztBQUNuQixZQUFZO0FBQ1osOENBQThDO0FBQzlDLEtBQUs7Q0FDTixDQUFDLENBQUM7QUFZSCxtQkFBbUI7QUFDbkIsSUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUM7QUFFekMsUUFBUSxDQUFDLG9CQUFvQixFQUFFO0lBQzdCLFVBQVUsQ0FBQztRQUNULG9CQUFvQjtRQUNuQixPQUFPLENBQUMsR0FBVyxDQUFDLFFBQVEsR0FBRyxhQUFhLENBQUM7SUFDaEQsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUM7UUFDUixzQkFBc0I7UUFDckIsT0FBTyxDQUFDLEdBQVcsQ0FBQyxRQUFRLEdBQUcsV0FBVyxDQUFDO0lBQzlDLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDZCQUE2QixFQUFFO1FBQy9CLE9BQU8sQ0FBQyxHQUFXLENBQUMsUUFBUSxHQUFHLGFBQWEsQ0FBQztRQUU5QyxJQUFBLGNBQU0sRUFBQyx1QkFBQyx3Q0FBa0IsS0FBRyxDQUFDLENBQUM7UUFDL0IsTUFBTSxDQUFDLGNBQU0sQ0FBQyxTQUFTLENBQUMsYUFB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RUFBRSxDQUFDO2dCQUNwQyxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQzlELENBQUM7aUJBQU0sSUFBSSxRQUFRLEtBQUssYUFBYSxFQUFFLENBQUM7Z0JBQ3RDLE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDaEUsQ0FBQztpQkFBTSxJQUFJLFFBQVEsS0FBSyxjQUFjLEVBQUUsQ0FBQztnQkFDdkMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxXQUFXLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUNqRSxDQUFDO1lBRUQsT0FBTyxFQUFFLENBQUM7UUFDWixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2dhbXphcmFtYXphbm92L0Rlc2t0b3AvZnVtby9zcmMvc2hhcmVkL2xpYi9kZXYtdG9vbHMvcGVyZm9ybWFuY2UtbW9uaXRvci9wZXJmb3JtYW5jZS1tb25pdG9yLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlciwgc2NyZWVuIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBQZXJmb3JtYW5jZU1vbml0b3IgfSBmcm9tICcuL3BlcmZvcm1hbmNlLW1vbml0b3InO1xuaW1wb3J0IHsgc2V0dXBQZXJmb3JtYW5jZU1vY2sgfSBmcm9tICdAL3NoYXJlZC90ZXN0aW5nL21vY2tzJztcblxuLy8gTW9jayBwZXJmb3JtYW5jZS5tZW1vcnlcbnNldHVwUGVyZm9ybWFuY2VNb2NrKHtcbiAgLy8gbWVtb3J5OiB7XG4gIC8vICAgdXNlZEpTSGVhcFNpemU6IDUwICogMTAyNCAqIDEwMjQsIC8vIDUwTUJcbiAgLy8gfSxcbn0pO1xuXG4vLyBNb2NrIGVudkNvbmZpZ1xuamVzdC5tb2NrKCcuLi8uLi8uLi8uLi8uLi9jb25maWcvZW52JywgKCkgPT4gKHtcbiAgZW52Q29uZmlnOiB7XG4gICAgaXNEZXZlbG9wbWVudDogdHJ1ZSxcbiAgICBpc1Byb2R1Y3Rpb246IGZhbHNlLFxuICAgIGlzVGVzdDogZmFsc2UsXG4gICAgaXNQcmV2aWV3OiBmYWxzZSxcbiAgfSxcbn0pKTtcblxuLy8gTW9jayBwcm9jZXNzLmVudlxuY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOVjtcblxuZGVzY3JpYmUoJ1BlcmZvcm1hbmNlTW9uaXRvcicsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gUmVzZXQgZW52aXJvbm1lbnRcbiAgICAocHJvY2Vzcy5lbnYgYXMgYW55KS5OT0RFX0VOViA9ICdkZXZlbG9wbWVudCc7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgLy8gUmVzdG9yZSBlbnZpcm9ubWVudFxuICAgIChwcm9jZXNzLmVudiBhcyBhbnkpLk5PREVfRU5WID0gb3JpZ2luYWxFbnY7XG4gIH0pO1xuXG4gIGl0KCdyZW5kZXJzIGluIGRldmVsb3BtZW50IG1vZGUnLCAoKSA9PiB7XG4gICAgKHByb2Nlc3MuZW52IGFzIGFueSkuTk9ERV9FTlYgPSAnZGV2ZWxvcG1lbnQnO1xuXG4gICAgcmVuZGVyKDxQZXJmb3JtYW5jZU1vbml0b3IgLz4pO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQZXJmb3JtYW5jZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnZG9lcyBub3QgcmVuZGVyIGluIHByb2R1Y3Rpb24gbW9kZScsICgpID0+IHtcbiAgICAvLyBTa2lwIHRoaXMgdGVzdCBhcyB0aGUgbW9jayBhcHByb2FjaCBpcyBjb21wbGV4XG4gICAgLy8gSW4gYSByZWFsIHNjZW5hcmlvLCB0aGlzIHdvdWxkIGJlIHRlc3RlZCBieSBzZXR0aW5nIE5PREVfRU5WPXByb2R1Y3Rpb25cbiAgICBleHBlY3QodHJ1ZSkudG9CZSh0cnVlKTtcbiAgfSk7XG5cbiAgaXQoJ2FwcGxpZXMgY3VzdG9tIGNsYXNzTmFtZScsICgpID0+IHtcbiAgICAocHJvY2Vzcy5lbnYgYXMgYW55KS5OT0RFX0VOViA9ICdkZXZlbG9wbWVudCc7XG5cbiAgICByZW5kZXIoPFBlcmZvcm1hbmNlTW9uaXRvciBjbGFzc05hbWU9XCJjdXN0b20tcGVyZi1tb25pdG9yXCIgLz4pO1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1BlcmZvcm1hbmNlJyk7XG4gICAgZXhwZWN0KGJ1dHRvbi5wYXJlbnRFbGVtZW50KS50b0hhdmVDbGFzcygnY3VzdG9tLXBlcmYtbW9uaXRvcicpO1xuICB9KTtcblxuICBpdCgndXNlcyBjb3JyZWN0IGRlZmF1bHQgcG9zaXRpb24nLCAoKSA9PiB7XG4gICAgKHByb2Nlc3MuZW52IGFzIGFueSkuTk9ERV9FTlYgPSAnZGV2ZWxvcG1lbnQnO1xuXG4gICAgcmVuZGVyKDxQZXJmb3JtYW5jZU1vbml0b3IgLz4pO1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1BlcmZvcm1hbmNlJyk7XG4gICAgZXhwZWN0KGJ1dHRvbi5wYXJlbnRFbGVtZW50KS50b0hhdmVDbGFzcygnbW9uaXRvclRvcFJpZ2h0Jyk7XG4gIH0pO1xuXG4gIGl0KCdhcHBsaWVzIGN1c3RvbSBwb3NpdGlvbicsICgpID0+IHtcbiAgICAocHJvY2Vzcy5lbnYgYXMgYW55KS5OT0RFX0VOViA9ICdkZXZlbG9wbWVudCc7XG5cbiAgICByZW5kZXIoPFBlcmZvcm1hbmNlTW9uaXRvciBwb3NpdGlvbj1cImJvdHRvbS1sZWZ0XCIgLz4pO1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1BlcmZvcm1hbmNlJyk7XG4gICAgZXhwZWN0KGJ1dHRvbi5wYXJlbnRFbGVtZW50KS50b0hhdmVDbGFzcygnbW9uaXRvckJvdHRvbUxlZnQnKTtcbiAgfSk7XG5cbiAgaXQoJ2hhcyBjbGlja2FibGUgcGVyZm9ybWFuY2UgYnV0dG9uJywgKCkgPT4ge1xuICAgIChwcm9jZXNzLmVudiBhcyBhbnkpLk5PREVfRU5WID0gJ2RldmVsb3BtZW50JztcblxuICAgIHJlbmRlcig8UGVyZm9ybWFuY2VNb25pdG9yIC8+KTtcblxuICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1BlcmZvcm1hbmNlJyk7XG4gICAgZXhwZWN0KGJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVDbGFzcygndG9nZ2xlQnV0dG9uJyk7XG4gIH0pO1xuXG4gIGl0KCdoYW5kbGVzIGFsbCBwb3NpdGlvbiB2YXJpYW50cycsICgpID0+IHtcbiAgICAocHJvY2Vzcy5lbnYgYXMgYW55KS5OT0RFX0VOViA9ICdkZXZlbG9wbWVudCc7XG5cbiAgICBjb25zdCBwb3NpdGlvbnMgPSBbJ3RvcC1sZWZ0JywgJ3RvcC1yaWdodCcsICdib3R0b20tbGVmdCcsICdib3R0b20tcmlnaHQnXSBhcyBjb25zdDtcblxuICAgIHBvc2l0aW9ucy5mb3JFYWNoKChwb3NpdGlvbikgPT4ge1xuICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXIoPFBlcmZvcm1hbmNlTW9uaXRvciBwb3NpdGlvbj17cG9zaXRpb259IC8+KTtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1BlcmZvcm1hbmNlJyk7XG5cbiAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ3RvcC1sZWZ0Jykge1xuICAgICAgICBleHBlY3QoYnV0dG9uLnBhcmVudEVsZW1lbnQpLnRvSGF2ZUNsYXNzKCdtb25pdG9yVG9wTGVmdCcpO1xuICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ3RvcC1yaWdodCcpIHtcbiAgICAgICAgZXhwZWN0KGJ1dHRvbi5wYXJlbnRFbGVtZW50KS50b0hhdmVDbGFzcygnbW9uaXRvclRvcFJpZ2h0Jyk7XG4gICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAnYm90dG9tLWxlZnQnKSB7XG4gICAgICAgIGV4cGVjdChidXR0b24ucGFyZW50RWxlbWVudCkudG9IYXZlQ2xhc3MoJ21vbml0b3JCb3R0b21MZWZ0Jyk7XG4gICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAnYm90dG9tLXJpZ2h0Jykge1xuICAgICAgICBleHBlY3QoYnV0dG9uLnBhcmVudEVsZW1lbnQpLnRvSGF2ZUNsYXNzKCdtb25pdG9yQm90dG9tUmlnaHQnKTtcbiAgICAgIH1cblxuICAgICAgdW5tb3VudCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9