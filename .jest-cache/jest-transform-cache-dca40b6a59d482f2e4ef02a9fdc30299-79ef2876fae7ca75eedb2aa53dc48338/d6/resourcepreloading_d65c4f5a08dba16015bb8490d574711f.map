{"file":"/Users/gamzaramazanov/Desktop/fumo/src/infrastructure/performance/lib/resource-preloading/resource-preloading.ts","mappings":"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","names":[],"sources":["/Users/gamzaramazanov/Desktop/fumo/src/infrastructure/performance/lib/resource-preloading/resource-preloading.ts"],"sourcesContent":["/**\n * Resource Preloading Utilities\n *\n * Critical resource preloading for maximum performance.\n * Built on top of existing performance monitoring infrastructure.\n */\n\nimport type {\n  PerformanceMetric,\n  PreloadResource,\n  ResourcePreloadConfig,\n} from '../../types/performance.types';\nimport { PerformanceRating } from '../../types/performance.enums';\nimport { performanceMonitor } from '../performance-monitor';\n\n// ============================================================================\n// DEFAULT CONFIGURATION\n// ============================================================================\n\nconst DEFAULT_CONFIG: ResourcePreloadConfig = {\n  fonts: true,\n  css: true,\n  js: true,\n  images: false,\n  custom: [],\n};\n\n// ============================================================================\n// RESOURCE PRELOADING UTILITIES\n// ============================================================================\n\n/**\n * Preload critical fonts\n */\nexport function preloadCriticalFonts(fonts: string[]): void {\n  const startTime = performance.now();\n\n  try {\n    if (typeof window === 'undefined') return;\n\n    fonts.forEach((font) => {\n      const link = document.createElement('link');\n      link.rel = 'preload';\n      link.as = 'font';\n      link.href = font;\n      link.crossOrigin = 'anonymous';\n      link.setAttribute('type', 'font/woff2');\n\n      document.head.appendChild(link);\n    });\n\n    // Track performance metric\n    const endTime = performance.now();\n    performanceMonitor.addMetric({\n      name: 'font_preloading',\n      value: endTime - startTime,\n      timestamp: Date.now(),\n      rating:\n        endTime - startTime < 10 ? PerformanceRating.GOOD : PerformanceRating.NEEDS_IMPROVEMENT,\n    });\n  } catch (error) {\n    performanceMonitor.addMetric({\n      name: 'font_preloading_error',\n      value: 0,\n      timestamp: Date.now(),\n      rating: PerformanceRating.POOR,\n    });\n  }\n}\n\n/**\n * Preload critical CSS\n */\nexport function preloadCriticalCSS(cssFiles: string[]): void {\n  const startTime = performance.now();\n\n  try {\n    if (typeof window === 'undefined') return;\n\n    cssFiles.forEach((css) => {\n      const link = document.createElement('link');\n      link.rel = 'preload';\n      link.as = 'style';\n      link.href = css;\n      link.setAttribute('onload', \"this.onload=null;this.rel='stylesheet'\");\n\n      document.head.appendChild(link);\n    });\n\n    // Track performance metric\n    const endTime = performance.now();\n    performanceMonitor.addMetric({\n      name: 'css_preloading',\n      value: endTime - startTime,\n      timestamp: Date.now(),\n      rating:\n        endTime - startTime < 10 ? PerformanceRating.GOOD : PerformanceRating.NEEDS_IMPROVEMENT,\n    });\n  } catch (error) {\n    performanceMonitor.addMetric({\n      name: 'css_preloading_error',\n      value: 0,\n      timestamp: Date.now(),\n      rating: PerformanceRating.POOR,\n    });\n  }\n}\n\n/**\n * Preload critical JavaScript\n */\nexport function preloadCriticalJS(jsFiles: string[]): void {\n  const startTime = performance.now();\n\n  try {\n    if (typeof window === 'undefined') return;\n\n    jsFiles.forEach((js) => {\n      const link = document.createElement('link');\n      link.rel = 'preload';\n      link.as = 'script';\n      link.href = js;\n      link.setAttribute('importance', 'high');\n\n      document.head.appendChild(link);\n    });\n\n    // Track performance metric\n    const endTime = performance.now();\n    performanceMonitor.addMetric({\n      name: 'js_preloading',\n      value: endTime - startTime,\n      timestamp: Date.now(),\n      rating:\n        endTime - startTime < 10 ? PerformanceRating.GOOD : PerformanceRating.NEEDS_IMPROVEMENT,\n    });\n  } catch (error) {\n    performanceMonitor.addMetric({\n      name: 'js_preloading_error',\n      value: 0,\n      timestamp: Date.now(),\n      rating: PerformanceRating.POOR,\n    });\n  }\n}\n\n/**\n * Preload critical images\n */\nexport function preloadCriticalImages(images: string[]): void {\n  const startTime = performance.now();\n\n  try {\n    if (typeof window === 'undefined') return;\n\n    images.forEach((image) => {\n      const link = document.createElement('link');\n      link.rel = 'preload';\n      link.as = 'image';\n      link.href = image;\n      link.setAttribute('importance', 'high');\n\n      document.head.appendChild(link);\n    });\n\n    // Track performance metric\n    const endTime = performance.now();\n    performanceMonitor.addMetric({\n      name: 'image_preloading',\n      value: endTime - startTime,\n      timestamp: Date.now(),\n      rating:\n        endTime - startTime < 10 ? PerformanceRating.GOOD : PerformanceRating.NEEDS_IMPROVEMENT,\n    });\n  } catch (error) {\n    performanceMonitor.addMetric({\n      name: 'image_preloading_error',\n      value: 0,\n      timestamp: Date.now(),\n      rating: PerformanceRating.POOR,\n    });\n  }\n}\n\n/**\n * Preload custom resources\n */\nexport function preloadCustomResources(resources: PreloadResource[]): void {\n  const startTime = performance.now();\n\n  try {\n    if (typeof window === 'undefined') return;\n\n    resources.forEach((resource) => {\n      const link = document.createElement('link');\n      link.rel = 'preload';\n      link.as = resource.as;\n      link.href = resource.href;\n\n      if (resource.media) {\n        link.setAttribute('media', resource.media);\n      }\n\n      if (resource.crossOrigin) {\n        link.crossOrigin = resource.crossOrigin;\n      }\n\n      if (resource.importance) {\n        link.setAttribute('importance', resource.importance);\n      }\n\n      document.head.appendChild(link);\n    });\n\n    // Track performance metric\n    const endTime = performance.now();\n    performanceMonitor.addMetric({\n      name: 'custom_resource_preloading',\n      value: endTime - startTime,\n      timestamp: Date.now(),\n      rating:\n        endTime - startTime < 10 ? PerformanceRating.GOOD : PerformanceRating.NEEDS_IMPROVEMENT,\n    });\n  } catch (error) {\n    performanceMonitor.addMetric({\n      name: 'custom_resource_preloading_error',\n      value: 0,\n      timestamp: Date.now(),\n      rating: PerformanceRating.POOR,\n    });\n  }\n}\n\n/**\n * Initialize resource preloading with configuration\n */\nexport function initializeResourcePreloading(\n  config: ResourcePreloadConfig = {},\n  resources: {\n    fonts?: string[];\n    css?: string[];\n    js?: string[];\n    images?: string[];\n    custom?: PreloadResource[];\n  } = {}\n): void {\n  const finalConfig = { ...DEFAULT_CONFIG, ...config };\n\n  // Preload fonts\n  if (finalConfig.fonts && resources.fonts) {\n    preloadCriticalFonts(resources.fonts);\n  }\n\n  // Preload CSS\n  if (finalConfig.css && resources.css) {\n    preloadCriticalCSS(resources.css);\n  }\n\n  // Preload JavaScript\n  if (finalConfig.js && resources.js) {\n    preloadCriticalJS(resources.js);\n  }\n\n  // Preload images\n  if (finalConfig.images && resources.images) {\n    preloadCriticalImages(resources.images);\n  }\n\n  // Preload custom resources\n  if (finalConfig.custom && finalConfig.custom.length > 0) {\n    preloadCustomResources(finalConfig.custom);\n  }\n\n  // Preload additional custom resources\n  if (resources.custom) {\n    preloadCustomResources(resources.custom);\n  }\n}\n\n/**\n * Add resource hints (preconnect, dns-prefetch)\n */\nexport function addResourceHints(\n  hints: { type: 'preconnect' | 'dns-prefetch'; url: string }[]\n): void {\n  const startTime = performance.now();\n\n  try {\n    if (typeof window === 'undefined') return;\n\n    hints.forEach(({ type, url }) => {\n      const link = document.createElement('link');\n      link.rel = type;\n      link.href = url;\n\n      if (type === 'preconnect') {\n        link.crossOrigin = 'anonymous';\n      }\n\n      document.head.appendChild(link);\n    });\n\n    // Track performance metric\n    const endTime = performance.now();\n    performanceMonitor.addMetric({\n      name: 'resource_hints',\n      value: endTime - startTime,\n      timestamp: Date.now(),\n      rating:\n        endTime - startTime < 5 ? PerformanceRating.GOOD : PerformanceRating.NEEDS_IMPROVEMENT,\n    });\n  } catch (error) {\n    performanceMonitor.addMetric({\n      name: 'resource_hints_error',\n      value: 0,\n      timestamp: Date.now(),\n      rating: PerformanceRating.POOR,\n    });\n  }\n}\n\n/**\n * Preload next page resources\n */\nexport function preloadNextPageResources(nextPageUrl: string): void {\n  const startTime = performance.now();\n\n  try {\n    if (typeof window === 'undefined') return;\n\n    // Prefetch the next page\n    const link = document.createElement('link');\n    link.rel = 'prefetch';\n    link.href = nextPageUrl;\n    link.setAttribute('importance', 'low');\n\n    document.head.appendChild(link);\n\n    // Track performance metric\n    const endTime = performance.now();\n    performanceMonitor.addMetric({\n      name: 'next_page_prefetch',\n      value: endTime - startTime,\n      timestamp: Date.now(),\n      rating:\n        endTime - startTime < 5 ? PerformanceRating.GOOD : PerformanceRating.NEEDS_IMPROVEMENT,\n    });\n  } catch (error) {\n    performanceMonitor.addMetric({\n      name: 'next_page_prefetch_error',\n      value: 0,\n      timestamp: Date.now(),\n      rating: PerformanceRating.POOR,\n    });\n  }\n}\n\n/**\n * Get preload performance metrics\n */\nexport function getPreloadMetrics(): PerformanceMetric[] {\n  return performanceMonitor\n    .getMetricsByName('font_preloading')\n    .concat(performanceMonitor.getMetricsByName('css_preloading'))\n    .concat(performanceMonitor.getMetricsByName('js_preloading'))\n    .concat(performanceMonitor.getMetricsByName('image_preloading'))\n    .concat(performanceMonitor.getMetricsByName('custom_resource_preloading'))\n    .concat(performanceMonitor.getMetricsByName('resource_hints'))\n    .concat(performanceMonitor.getMetricsByName('next_page_prefetch'));\n}\n"],"version":3}